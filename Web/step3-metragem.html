<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BRASRIO CAMPO GRANDE - Informar Metragem</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/jpeg" href="Isolino.jpg">
</head>
<body>

<header>
  <img src="Isolino.jpg" alt="Isolino Mascote" class="mascote-topo">
  <div>
    <h1>BRASRIO CAMPO GRANDE</h1>
    <small>Orçamento Rápido</small>
  </div>
</header>

<div class="container">
  <div class="section">
    <h2>Informe a metragem (m²)</h2>
    <p id="material-info"></p>
    
    <input type="number" id="metragem" placeholder="Ex: 12" min="0" step="0.01">

    <!-- Lista de placas só para Drywall -->
    <div id="placaDrywallContainer" style="display:none; margin-top:10px;">
      <label for="placaDrywall" style="display:block; margin-bottom:6px;">Tipo de placa</label>
      <select id="placaDrywall" style="max-width: 280px; width:100%;">
        <option value="" selected disabled>Selecione o tipo de placa...</option>
        <option value="280">Drywall ST Branco 1,80 x 1,20</option>
        <option value="177">Drywall RU (Resistente à Umidade) 1,80 x 1,20</option>
        <option value="193">Drywall RF (Resistente à fogo) 1,80 x 1,20</option>
      </select>
    </div>

    <br>
    <div class="btn-group">
      <button onclick="calcular()">Calcular</button>
      <button class="btn-back" onclick="goBack()">Voltar</button>
    </div>
  </div>
</div>

<script src="utils.js"></script>
<script>
// Pega os parâmetros da URL
const urlParams = new URLSearchParams(window.location.search);
const material = urlParams.get('material');
const subtype = urlParams.get('subtype');

// Exibe informações do material selecionado
document.addEventListener('DOMContentLoaded', function() {
  const materialInfo = document.getElementById('material-info');
  if (material && subtype) {
    materialInfo.textContent = `Material: ${material} - ${subtype}`;
  } else if (material) {
    materialInfo.textContent = `Material: ${material}`;
  }

  // Mostra/esconde a lista de placas conforme o material
  const cont = document.getElementById('placaDrywallContainer');
  if (material === 'Drywall') {
    cont.style.display = 'block';
  }
});

function calcular() {
  const m2 = parseFloat(document.getElementById('metragem').value);
  if (isNaN(m2) || m2 <= 0) {
    alert("Digite uma metragem válida!");
    return;
  }

  let placaSel = '';
  if (material === 'Drywall') {
    placaSel = document.getElementById('placaDrywall').value;
    if (!placaSel) {
      alert("Selecione o tipo de placa de Drywall.");
      return;
    }
  }

  // Monta os parâmetros para a página de resultado
  let url = `resultado.html?material=${encodeURIComponent(material)}&m2=${m2}&method=metragem`;
  if (subtype) {
    url += `&subtype=${encodeURIComponent(subtype)}`;
  }
  if (placaSel) {
    url += `&placa=${encodeURIComponent(placaSel)}`;
  }

  window.location.href = url;
}

function goBack() {
  let url = `step2.html?material=${encodeURIComponent(material)}`;
  if (subtype) {
    url += `&subtype=${encodeURIComponent(subtype)}`;
  }
  window.location.href = url;
}
</script>

</body>
</html>
